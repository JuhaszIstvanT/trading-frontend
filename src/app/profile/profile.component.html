<div class="container">
  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-primary">
          <h4 class="text-white">Transaction History</h4>
        </div>
        <div class="card-body">
          <app-transaction-history></app-transaction-history>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-success">
          <h4 class="text-white">Trade History</h4>
        </div>
        <div class="card-body">
          <app-trade-history></app-trade-history>
        </div>
      </div>
    </div>
  </div>

  <!-- Additional Sections -->
  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-info">
          <h4 class="text-white">Personal Information</h4>
        </div>
        <div class="card-body">
          <!-- Form for updating personal information -->
          <form (submit)="updatePersonalInfo()">
            <div class="mb-3">
              <label for="name" class="form-label">Name:</label>
              <input
                type="text"
                id="name"
                name="name"
                [(ngModel)]="userProfile.username"
                class="form-control"
                required
              />
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email:</label>
              <input
                type="email"
                id="email"
                name="email"
                [(ngModel)]="userProfile.email"
                class="form-control"
                required
              />
            </div>
            <div class="mb-3">
              <label for="debitCardNumber" class="form-label"
                >Debit Card Number:</label
              >
              <input
                type="text"
                id="debitCardNumber"
                name="debitCardNumber"
                [(ngModel)]="userProfile.debitCardNumber"
                class="form-control"
                required
                disabled
              />
            </div>
            <div
              id="successMessageProfile"
              *ngIf="successMessageProfile"
              class="alert alert-success"
              role="alert"
            >
              {{ successMessageProfile }}
            </div>
            <button id="save" type="submit" class="btn btn-primary">
              Save Changes
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-warning">
          <h4 class="text-white">Password Reset</h4>
        </div>
        <div class="card-body">
          <form (submit)="resetPassword()">
            <div class="mb-3">
              <label for="oldPassword" class="form-label">Old Password:</label>
              <input
                type="password"
                id="oldPassword"
                name="oldPassword"
                [(ngModel)]="oldPassword"
                class="form-control"
                required
              />
            </div>
            <div class="mb-3">
              <label for="newPassword" class="form-label">New Password:</label>
              <input
                type="password"
                id="newPassword"
                name="newPassword"
                [(ngModel)]="newPassword"
                class="form-control"
                required
              />
            </div>
            <div class="mb-3">
              <label for="confirmPassword" class="form-label"
                >Confirm New Password:</label
              >
              <input
                type="password"
                id="confirmPassword"
                name="confirmPassword"
                [(ngModel)]="confirmPassword"
                class="form-control"
                required
              />
            </div>
            <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
              {{ errorMessage }}
            </div>
            <div
              *ngIf="successMessage"
              class="alert alert-success"
              role="alert"
            >
              {{ successMessage }}
            </div>
            <button id="resetpwd" type="submit" class="btn btn-warning">
              Reset Password
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- New section for followed traders -->
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-secondary">
          <h4 class="text-white">Followed Traders</h4>
        </div>
        <div class="card-body">
          <ul class="list-group">
            <li
              class="list-group-item"
              *ngFor="let trader of followedTraders"
              (click)="redirectToTrader(trader.userId)"
            >
              {{ trader.userName }}
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
